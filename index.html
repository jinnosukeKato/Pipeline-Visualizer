<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Pipeline Visualizer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <script type="module" src="index.js"></script>
    <script src="register-input.js"></script>

    <div id="app">
        <h1>Pipeline Visualizer</h1>

        <div>
            <h2>命令入力</h2>
            <div class="input-group">
                <div class="input-field">
                    <label for="operationInput">命令</label>
                    <select id="operationInput">
                        <option value="ADD">ADD</option>
                        <option value="SUB">SUB</option>
                        <option value="NOP">NOP</option>
                    </select>
                </div>
                <div class="input-field">
                    <label for="operandInput_1">rd</label>
                    <register-input id="operandInput_1"></register-input>
                </div>
                <div class="input-field">
                    <label for="operandInput_2">rs1</label>
                    <register-input id="operandInput_2"></register-input>
                </div>
                <div class="input-field">
                    <label for="operandInput_3">rs2</label>
                    <register-input id="operandInput_3"></register-input>
                </div>
                <button id="addInstructionButton">追加</button>
            </div>
            <button id="loadHazardExampleButton">データハザードの例をロード</button>

            <h2>命令リスト</h2>
            <pre id="instructions"></pre>
            <button id="clearInstructionsButton">命令をクリア</button>
        </div>

        <div>
            <h2>パイプライン</h2>
            <table class="pipeline-table">
                <thead>
                    <tr>
                        <th>IF</th>
                        <th>ID</th>
                        <th>EX</th>
                        <th>MEM</th>
                        <th>WB</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="cell" id="stage-if"></td>
                        <td class="cell" id="stage-id"></td>
                        <td class="cell" id="stage-ex"></td>
                        <td class="cell" id="stage-mem"></td>
                        <td class="cell" id="stage-wb"></td>
                    </tr>
                </tbody>
            </table>
            <div class="pipeline-controls">
                <div class="cycle-controls">
                    <button id="prevButton">前へ</button>
                    <span class="cycle-display">Cycle: <span id="currentCycle">0</span></span>
                    <button id="nextButton">次へ</button>
                    <button id="resetButton">リセット</button>
                </div>

                <div id="settings-controls">
                    <label>
                        <input type="checkbox" id="forwardingToggle"> フォワーディング有効化 (ID ← MEM)
                    </label>
                </div>
            </div>
        </div>
    </div>
</body>
</html>